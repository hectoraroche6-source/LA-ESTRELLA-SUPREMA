<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="site-title-tag">LA ESTRELLA SUPREMA.CUBA</title>
    <style>
        :root {
            --primary-color: #007bff;
            --bg-color: #ffffff;
            --card-bg: #f9f9f9;
            --text-main: #212529;
            --border-gradient: linear-gradient(45deg, #87CEEB, #C0C0C0); /* Cielo y Plata */
        }

        /* --- FRANJAS DE COLORES (BORDES DE P√ÅGINA) --- */
        body { 
            font-family: 'Segoe UI', sans-serif; 
            margin: 0; 
            background-color: var(--bg-color); 
            border: 10px solid;
            border-image: var(--border-gradient) 1;
            min-height: 100vh;
            transition: 0.3s;
        }

        .hidden { display: none !important; }

        /* --- PORTADA DE BIENVENIDA --- */
        #portada {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-position: center;
            background-size: cover;
            background-attachment: fixed;
            color: white;
            text-align: center;
            position: relative;
        }

        #portada::before {
            content: "";
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); /* Oscurece el fondo para leer texto */
            z-index: 1;
        }

        #portada > * { z-index: 2; }

        #p-titulo { font-size: 4rem; margin: 0; text-transform: uppercase; }
        #p-frase { font-size: 1.5rem; margin: 10px 0 60px 0; }

        /* Animaci√≥n del Bot√≥n Ver Combos */
        @keyframes wobble {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-3px); }
            100% { transform: translateX(0); }
        }

        .btn-ver-combos {
            margin-top: 20px;
            padding: 15px 40px;
            font-size: 1.2rem;
            animation: wobble 3s infinite ease-in-out;
            cursor: pointer;
            border-radius: 50px;
            border: none;
            background: var(--primary-color);
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        /* --- BUSCADOR INTELIGENTE --- */
        .search-container {
            margin: 20px auto;
            max-width: 600px;
            display: flex;
            gap: 10px;
        }
        #buscador {
            flex: 1;
            padding: 12px;
            border-radius: 25px;
            border: 2px solid #ddd;
            font-size: 1rem;
        }

        /* --- TIENDA --- */
        .container { max-width: 1100px; margin: auto; padding: 20px; }
        .grid-productos { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; }
        .card { background: var(--card-bg); border-radius: 15px; overflow: hidden; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border: 1px solid #eee; }
        .card img { width: 100%; height: 160px; object-fit: cover; }
        
        /* --- CARRITO DE ALTA CALIDAD --- */
        #carrito-flotante {
            position: fixed; bottom: 30px; right: 30px;
            background: #2e4d23; /* Verde Mate */
            color: #C0C0C0; /* Plata */
            padding: 18px; border-radius: 50%;
            box-shadow: 0 5px 20px rgba(0,0,0,0.4);
            cursor: pointer; z-index: 100; font-size: 24px;
            border: 2px solid #C0C0C0;
        }

        .modal-carrito-content {
            border: 4px solid;
            border-image: linear-gradient(to bottom, #2e4d23, #C0C0C0) 1;
            background: white; padding: 25px;
        }

        .item-carrito {
            display: flex; justify-content: space-between; align-items: center;
            padding: 10px 0; border-bottom: 1px solid #eee;
        }

        /* --- ADMIN --- */
        .admin-section { background: #f0f0f0; padding: 15px; margin-bottom: 20px; border-radius: 10px; border-left: 5px solid var(--primary-color); }
        #huella-invisible { position: fixed; bottom: 15px; left: 15px; opacity: 0.05; cursor: pointer; font-size: 25px; z-index: 1000; }
        #btn-config { position: fixed; top: 20px; right: 20px; background: white; border-radius: 50%; padding: 10px; z-index: 1000; cursor: pointer; }

    </style>
</head>
<body>

    <audio id="audio-compra"></audio>

    <section id="portada">
        <h1 id="p-titulo">LA ESTRELLA SUPREMA</h1>
        <p id="p-frase">Calidad que inspira, precios que enamoran.</p>
        <button class="btn-ver-combos" onclick="mostrarTienda()">Ver combos</button>
    </section>

    <section id="tienda" class="hidden">
        <div class="container">
            <h2 id="t-titulo-1">NUESTRAS OFERTAS</h2>
            <p id="t-desc-1">Selecciona lo mejor para tu familia</p>
            
            <div class="search-container">
                <input type="text" id="buscador" placeholder="üîç Buscar producto o combo..." onkeyup="filtrarProductos()">
            </div>

            <h3 id="t-titulo-2">COMBOS DISPONIBLES</h3>
            <p id="t-desc-2">Aprovecha antes de que se agoten</p>

            <div id="contenedor-tienda"></div>
        </div>
    </section>

    <div id="carrito-flotante" class="hidden" onclick="abrirCarrito()">üõí</div>

    <div id="huella-invisible" onclick="pedirLogin()">üë£</div>
    <div id="btn-config" class="hidden" onclick="abrirAdmin()">‚öôÔ∏è</div>

    <div id="modal-carrito" class="modal hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); display:flex; justify-content:center; align-items:center; z-index:2000;">
        <div class="modal-carrito-content" style="width:90%; max-width:500px; position:relative;">
            <span onclick="cerrarModales()" style="position:absolute; top:10px; right:15px; font-size:25px; cursor:pointer;">&times;</span>
            <h2 id="cart-header-name">PEDIDO LA ESTRELLA</h2>
            <div id="lista-pedido"></div>
            <hr>
            <h3 id="total-pedido">Costo total: $0 CUP</h3>
            <button onclick="enviarWhatsApp()" style="width:100%; padding:15px; background:#2e4d23; color:white; border:none; border-radius:5px; cursor:pointer; font-weight:bold;">Hacer pedido</button>
        </div>
    </div>

    <div id="modal-admin" class="modal hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); display:flex; justify-content:center; align-items:center; z-index:3000; overflow-y:auto;">
        <div style="background:white; padding:20px; width:95%; max-width:600px; border-radius:10px;">
            <button onclick="cerrarModales()">Cerrar Panel</button>
            <button onclick="logout()" style="background:red; color:white;">Desconectar Admin</button>
            
            <h3>CONFIGURACI√ìN DE PORTADA</h3>
            <input type="text" id="edit-nombre-web" placeholder="Nombre de la Web (T√≠tulo arriba)">
            <input type="text" id="edit-p-titulo" placeholder="T√≠tulo de Portada">
            <input type="text" id="edit-p-frase" placeholder="Frase Motivadora">
            <label>Fondo de Pantalla Portada:</label>
            <input type="file" id="edit-p-fondo" accept="image/*">

            <h3>CONFIGURACI√ìN DE SECCIONES</h3>
            <div class="admin-section">
                <input type="text" id="edit-t1" placeholder="T√≠tulo Principal Secci√≥n">
                <input type="text" id="edit-d1" placeholder="Escrito debajo T√≠tulo 1">
                <input type="text" id="edit-t2" placeholder="T√≠tulo Secundario Secci√≥n">
                <input type="text" id="edit-d2" placeholder="Escrito debajo T√≠tulo 2">
            </div>

            <h3>COLORES DE BORDES (P√ÅGINA)</h3>
            <select id="select-bordes" onchange="cambiarBordes(this.value)">
                <option value="linear-gradient(45deg, #87CEEB, #C0C0C0)">Cielo y Plata</option>
                <option value="linear-gradient(45deg, #2e4d23, #C0C0C0)">Verde Mate y Plata</option>
                <option value="linear-gradient(45deg, #FFD700, #C0C0C0)">Oro y Plata</option>
                <option value="linear-gradient(45deg, #E6E6FA, #C0C0C0)">Lavanda y Plata</option>
                <option value="linear-gradient(45deg, #000000, #C0C0C0)">Negro y Plata</option>
                <option value="linear-gradient(45deg, #FF69B4, #C0C0C0)">Rosa y Plata</option>
                <option value="linear-gradient(45deg, #00FA9A, #87CEEB)">Menta y Cielo</option>
                <option value="linear-gradient(45deg, #F0F8FF, #708090)">Hielo y Pizarra</option>
                <option value="linear-gradient(45deg, #B22222, #C0C0C0)">Rub√≠ y Plata</option>
                <option value="linear-gradient(45deg, #4B0082, #EE82EE)">√çndigo y Violeta</option>
            </select>

            <button onclick="guardarAdmin()" style="display:block; width:100%; padding:15px; background:green; color:white; margin-top:10px;">GUARDAR CAMBIOS</button>
        </div>
    </div>

    <script>
        // BASE DE DATOS
        let db = JSON.parse(localStorage.getItem('estrella_v2')) || {
            nombreWeb: "LA ESTRELLA SUPREMA.CUBA",
            pTitulo: "LA ESTRELLA SUPREMA",
            pFrase: "Calidad que inspira, precios que enamoran.",
            pFondo: "https://images.unsplash.com/photo-1542838132-92c53300491e?auto=format&fit=crop&w=1350&q=80",
            t1: "NUESTRAS OFERTAS", d1: "Selecciona lo mejor para tu familia",
            t2: "COMBOS DISPONIBLES", d2: "Aprovecha antes de que se agoten",
            bordes: "linear-gradient(45deg, #87CEEB, #C0C0C0)",
            audio: "https://assets.mixkit.co/sfx/preview/mixkit-software-interface-start-2574.mp3",
            productos: []
        };

        let carrito = [];

        window.onload = () => { aplicarTodo(); };

        function aplicarTodo() {
            document.title = db.nombreWeb;
            document.getElementById('site-title-tag').innerText = db.nombreWeb;
            document.getElementById('p-titulo').innerText = db.pTitulo;
            document.getElementById('p-frase').innerText = db.pFrase;
            document.getElementById('portada').style.backgroundImage = `url(${db.pFondo})`;
            document.getElementById('t-titulo-1').innerText = db.t1;
            document.getElementById('t-desc-1').innerText = db.d1;
            document.getElementById('t-titulo-2').innerText = db.t2;
            document.getElementById('t-desc-2').innerText = db.d2;
            document.documentElement.style.setProperty('--border-gradient', db.bordes);
            document.getElementById('audio-compra').src = db.audio;
            renderTienda();
        }

        function mostrarTienda() {
            document.getElementById('portada').classList.add('hidden');
            document.getElementById('tienda').classList.remove('hidden');
            document.getElementById('carrito-flotante').classList.remove('hidden');
        }

        function renderTienda(filtro = "") {
            const cont = document.getElementById('contenedor-tienda');
            cont.innerHTML = '';
            const filtrados = db.productos.filter(p => p.nom.toLowerCase().includes(filtro.toLowerCase()));
            
            const grid = document.createElement('div');
            grid.className = 'grid-productos';
            filtrados.forEach(p => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <img src="${p.img}">
                    <div style="padding:10px; text-align:center;">
                        <b>${p.nom}</b><br><span style="color:green">$${p.pre} CUP</span>
                        <button onclick="agregarAlCarrito(${p.id})" style="width:100%; margin-top:10px; cursor:pointer;">A√±adir üõí</button>
                    </div>
                `;
                grid.appendChild(card);
            });
            cont.appendChild(grid);
        }

        function filtrarProductos() {
            const val = document.getElementById('buscador').value;
            renderTienda(val);
        }

        function agregarAlCarrito(id) {
            const prod = db.productos.find(p => p.id === id);
            const enCart = carrito.find(p => p.id === id);
            if(enCart) enCart.cant++;
            else carrito.push({...prod, cant: 1});
            
            const a = document.getElementById('audio-compra');
            a.currentTime = 0; a.play();
            actualizarUI();
        }

        function abrirCarrito() {
            const lista = document.getElementById('lista-pedido');
            lista.innerHTML = '';
            let total = 0;

            if(carrito.length === 0) {
                lista.innerHTML = "<h4>Haga su pedido</h4>";
            } else {
                carrito.forEach((p, idx) => {
                    const subtotal = p.pre * p.cant;
                    total += subtotal;
                    lista.innerHTML += `
                        <div class="item-carrito">
                            <div style="flex:1"><b>${p.nom}</b></div>
                            <div style="display:flex; align-items:center; gap:10px;">
                                <span>{${p.cant}}</span>
                                <button onclick="modificar(${idx}, -1)">‚ûñ</button>
                                <button onclick="modificar(${idx}, 1)">‚ûï</button>
                            </div>
                            <div style="width:80px; text-align:right;">$${subtotal}</div>
                        </div>
                    `;
                });
            }
            document.getElementById('total-pedido').innerText = `Costo total: $${total} CUP`;
            document.getElementById('modal-carrito').classList.remove('hidden');
        }

        function modificar(idx, cant) {
            carrito[idx].cant += cant;
            if(carrito[idx].cant < 1) carrito.splice(idx, 1);
            abrirCarrito();
            actualizarUI();
        }

        function actualizarUI() {
            // Solo para el estado del icono si lo deseas
        }

        function pedirLogin() {
            const u = prompt("Usuario:");
            const p = prompt("Contrase√±a:");
            if(u === "H√âCTOR" && p === "VIRTUS123VIRTUS") {
                document.getElementById('btn-config').classList.remove('hidden');
                alert("Modo Admin Activo");
            }
        }

        function abrirAdmin() {
            document.getElementById('edit-nombre-web').value = db.nombreWeb;
            document.getElementById('edit-p-titulo').value = db.pTitulo;
            document.getElementById('edit-p-frase').value = db.pFrase;
            document.getElementById('edit-t1').value = db.t1;
            document.getElementById('edit-d1').value = db.d1;
            document.getElementById('edit-t2').value = db.t2;
            document.getElementById('edit-d2').value = db.d2;
            document.getElementById('modal-admin').classList.remove('hidden');
        }

        function guardarAdmin() {
            db.nombreWeb = document.getElementById('edit-nombre-web').value;
            db.pTitulo = document.getElementById('edit-p-titulo').value;
            db.pFrase = document.getElementById('edit-p-frase').value;
            db.t1 = document.getElementById('edit-t1').value;
            db.d1 = document.getElementById('edit-d1').value;
            db.t2 = document.getElementById('edit-t2').value;
            db.d2 = document.getElementById('edit-d2').value;
            db.bordes = document.getElementById('select-bordes').value;

            const fondoFile = document.getElementById('edit-p-fondo').files[0];
            if(fondoFile) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    db.pFondo = e.target.result;
                    salvar();
                };
                reader.readAsDataURL(fondoFile);
            } else {
                salvar();
            }
        }

        function salvar() {
            localStorage.setItem('estrella_v2', JSON.stringify(db));
            aplicarTodo();
            cerrarModales();
            alert("Cambios guardados");
        }

        function cerrarModales() {
            document.querySelectorAll('.modal').forEach(m => m.classList.add('hidden'));
        }

        function logout() {
            document.getElementById('btn-config').classList.add('hidden');
            cerrarModales();
        }

        function enviarWhatsApp() {
            if(carrito.length === 0) return;
            let msg = "üåü *¬°HOLA! VENGO DE LA P√ÅGINA: LA ESTRELLA SUPREMA* üåü%0A%0A";
            msg += "üìù *DETALLE DE MI PEDIDO:*%0A";
            let total = 0;
            carrito.forEach(p => {
                msg += `‚Ä¢ ${p.nom} (x${p.cant}) - $${p.pre * p.cant} CUP%0A`;
                total += (p.pre * p.cant);
            });
            msg += `%0Aüí∞ *TOTAL A PAGAR: ${total} CUP*%0A%0A`;
            msg += "üìë *VALE DE VENTA*%0A";
            msg += "_Para procesar su orden con √©xito, por favor rellene los datos del destinatario en Cuba:_%0A%0A";
            msg += "üë§ *Nombre Completo:*%0AüÜî *CI:*%0Aüìç *Direcci√≥n Exacta:*%0AüèÅ *Punto de referencia:*%0Aüíµ *Moneda de pago:*%0A%0A";
            msg += "üöö *GARANT√çA DE ENTREGA:*%0A*Se garantiza la entrega en un plazo m√°ximo de 48 horas tras la confirmaci√≥n de su pedido.*";
            window.open(`https://wa.me/5358876921?text=${msg}`);
        }
    </script>
</body>
</html>
